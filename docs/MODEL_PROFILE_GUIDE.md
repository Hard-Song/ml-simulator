# 模型能力画像调整功能说明

## 新增功能

现在可以为每个模型自定义能力画像，覆盖预定义的模型特征。

## 使用方法

### 1. 基础模式（使用预定义画像）

默认情况下，系统使用预定义的模型画像。不同模型有不同的默认能力：

| 模型 | Bias | Variance | Capacity | Noise Tolerance |
|------|------|----------|----------|-----------------|
| SVM | 0.5 | 0.2 | 0.6 | 0.4 |
| RF | 0.3 | 0.4 | 0.7 | 0.8 |
| LGBM | 0.3 | 0.3 | 0.8 | 0.6 |
| DNN | 0.2 | 0.7 | 0.95 | 0.5 |
| Transformer | 0.2 | 0.9 | 0.98 | 0.4 |

### 2. 自定义模式

#### 步骤 1: 启用自定义
在左侧面板的"模型能力调整"区域，打开"启用自定义"开关。

#### 步骤 2: 调整参数
四个滑块可以调整：

1. **偏差 (Bias)** [0-1]
   - 越高：模型偏差越大，欠拟合风险越高
   - 越低：模型偏差越小，更灵活
   - 示例：
     - 0.2: 深度模型（DNN, Transformer）
     - 0.5: 中等模型（SVM）
     - 0.8: 简单模型（决策树）

2. **方差 (Variance)** [0-1]
   - 越高：模型方差越大，过拟合风险越高
   - 越低：模型越稳定
   - 示例：
     - 0.1: 逻辑回归（非常稳定）
     - 0.5: 随机森林（中等波动）
     - 0.9: Transformer（高方差）

3. **表达能力 (Capacity)** [0-1]
   - 越高：模型学习能力越强
   - 越低：模型越简单
   - 示例：
     - 0.5: 线性模型上限
     - 0.8: 集成模型
     - 0.98: Transformer

4. **噪声容忍度 (Noise Tolerance)** [0-1]
   - 越高：对噪声越不敏感，越鲁棒
   - 越低：对噪声越敏感
   - 示例：
     - 0.4: SVM（对噪声敏感）
     - 0.8: 随机森林（抗噪声）

#### 步骤 3: 运行模拟
点击"运行模拟"按钮，所有选中的模型将使用相同的自定义画像。

## 典型应用场景

### 场景 1: 对比不同偏差的模型

**目标**: 理解偏差对性能的影响

**配置**:
- 选择模型: lgbm, rf, logreg
- 启用自定义
- 测试不同的 Bias 值: 0.2, 0.5, 0.8

**预期结果**:
- 低偏差 (0.2): 在高非线性任务上表现好
- 高偏差 (0.8): 容易欠拟合

### 场景 2: 模拟过拟合

**目标**: 观察高方差模型的行为

**配置**:
- 选择模型: dnn, transformer
- 启用自定义
- Variance: 0.9（高方差）
- Capacity: 0.95（高表达能力）

**预期结果**:
- 训练集性能好，测试集性能差
- 对噪声数据敏感

### 场景 3: 寻找鲁棒模型

**目标**: 在高噪声数据上找最佳模型

**配置**:
- 选择模型: rf, lgbm, xgboost
- 标签噪声: 0.3（高噪声）
- 特征噪声: 0.3
- 启用自定义
- Noise Tolerance: 0.8（高容忍度）

**预期结果**:
- 高噪声容忍度的模型表现更好
- 随机森林类模型可能最优

### 场景 4: 线性 vs 非线性

**目标**: 对比线性和非线性模型

**配置 1: 线性任务**
- Nonlinearity: 0.1
- Bias: 0.5（中等）
- Variance: 0.1（低方差）

**配置 2: 非线性任务**
- Nonlinearity: 0.9
- Bias: 0.2（低偏差）
- Capacity: 0.8（高表达能力）

**预期结果**:
- 线性任务：逻辑回归表现好
- 非线性任务：深度模型表现好

## 参数组合建议

### 保守型（低过拟合风险）
```json
{
  "bias": 0.4,
  "variance": 0.2,
  "capacity": 0.6,
  "noise_tolerance": 0.7
}
```
适用: 数据量小、噪声大

### 激进型（追求高性能）
```json
{
  "bias": 0.2,
  "variance": 0.6,
  "capacity": 0.9,
  "noise_tolerance": 0.4
}
```
适用: 数据量大、质量高

### 平衡型（推荐）
```json
{
  "bias": 0.3,
  "variance": 0.3,
  "capacity": 0.8,
  "noise_tolerance": 0.6
}
```
适用: 一般场景

## 技术细节

### 参数如何影响模拟

1. **Bias**
   - 影响模型对真实类别的预测偏移
   - 高偏差：预测倾向于某些类别
   - 公式: `bias_effect = bias * (1 if c != true_label else 0)`

2. **Variance**
   - 影响模型预测的稳定性
   - 高方差：样本间预测差异大
   - 公式: `ε_model ~ Normal(0, variance)`

3. **Capacity**
   - 影响模型能学习的最大性能
   - 高容量：能更好地适应高难度任务
   - 公式: `μ = separability * capacity`

4. **Noise Tolerance**
   - 影响模型对标签噪声的抵抗能力
   - 高容忍度：即使有噪声也能保持性能
   - 公式: 噪声样本的影响 `= 1 - noise_tolerance`

## 与预定义模型的关系

| 情况 | 使用的画像 |
|------|-----------|
| 未启用自定义 | 预定义模型画像（如 LGBM 的默认值）|
| 启用自定义 | 自定义画像（所有模型相同）|

**注意**: 当前实现中，启用自定义后所有选中模型使用相同的自定义画像。如果需要为不同模型设置不同参数，可以多次运行模拟。

## 未来改进

- [ ] 支持为每个模型单独设置能力参数
- [ ] 预设模板（保守/平衡/激进）
- [ ] 参数建议系统
- [ ] 可视化参数空间

## 常见问题

### Q: 为什么自定义后所有模型表现相似？

A: 因为启用自定义后，所有模型使用相同的画像参数。如果想对比不同画像，应该：

1. 关闭自定义，使用预定义画像（对比不同模型）
2. 启用自定义，调整参数，观察同一参数下不同模型的行为差异

### Q: 如何找到最佳参数组合？

A: 可以采用以下策略：
1. 从"平衡型"参数开始
2. 根据任务特点调整：
   - 高噪声 → 提高 noise_tolerance
   - 非线性任务 → 提高 capacity，降低 bias
   - 小样本 → 降低 variance

### Q: 参数的最佳范围是多少？

A: 建议范围：
- Bias: 0.2 - 0.5
- Variance: 0.1 - 0.6
- Capacity: 0.5 - 0.95
- Noise Tolerance: 0.3 - 0.8
