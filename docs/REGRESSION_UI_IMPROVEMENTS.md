# 回归任务UI参数说明改进

## 改进时间
2025-01-15

## 改进目标

为回归任务的数据集特性和模型能力配置添加详细的参数说明和调参建议，帮助用户更好地理解每个参数的含义和合理取值范围。

---

## 改进内容

### 1. 回归数据集特性参数说明

在"回归数据集特性"卡片中，为每个参数添加了：

#### 1.1 信噪比 (Signal-to-Noise Ratio)
- **参数含义**: 信号方差与噪声方差的比值。越高表示数据质量越好，模型越容易学习
- **取值范围**: 0.1 - 2.0
- **调参建议**:
  - 1.0 为中等难度
  - > 1.5 适合测试强模型
  - < 0.5 测试模型鲁棒性

#### 1.2 函数复杂度 (Function Complexity)
- **参数含义**: 真实函数 f(X) 的非线性程度。越高需要模型有更强的表达能力
- **取值范围**: 0 - 1
- **调参建议**:
  - 0 - 0.3: 适合线性模型
  - 0.4 - 0.7: 需要树模型或DNN
  - > 0.7: 需要强非线性模型

#### 1.3 噪声水平 (Noise Level)
- **参数含义**: 目标值 y 中的基础噪声强度。影响所有样本的预测难度
- **取值范围**: 0 - 1
- **调参建议**:
  - 0.1 - 0.3: 为正常范围
  - > 0.5: 测试模型噪声容忍度

#### 1.4 异方差性 (Heteroscedasticity)
- **参数含义**: 勾选后噪声大小会随目标值绝对值增大而增大，更接近真实场景
- **调参建议**:
  - 勾选以模拟真实场景（如房价预测中高价房波动更大）

#### 1.5 特征数量 (Number of Features)
- **参数含义**: 特征矩阵 X 的维度。特征越多，高维空间越复杂，越容易过拟合
- **取值范围**: 2 - 20
- **调参建议**:
  - 5 - 10: 简单任务
  - 10 - 15: 需要正则化
  - > 15: 测试高维处理能力

#### 1.6 特征噪声 (Feature Noise)
- **参数含义**: 特征矩阵 X 本身的噪声水平。特征噪声会降低模型学习信号的能力
- **取值范围**: 0 - 0.5
- **调参建议**:
  - 0.01 - 0.1: 为正常范围
  - > 0.2: 测试特征工程能力

### 2. 模型能力参数说明

在"模型能力配置"卡片中，添加了一个蓝色提示框，包含：

#### 2.1 参数含义与建议范围

| 参数 | 含义 | 线性模型 | 树模型 | DNN/Transformer |
|------|------|----------|--------|-----------------|
| **Bias (偏差)** | 系统性偏差，越高模型越容易欠拟合 | 0.4 - 0.6 | 0.2 - 0.4 | 0.1 - 0.3 |
| **Variance (方差)** | 预测不稳定性，越高模型越容易过拟合 | 0.1 - 0.2 | 0.3 - 0.5 | 0.4 - 0.7 |
| **Capacity (容量)** | 模型表达能力上限，越高拟合能力越强 | 0.4 - 0.6 | 0.7 - 0.8 | 0.9 - 1.0 |
| **Noise Tol. (噪声容忍度)** | 对噪声的抗干扰能力 | 0.4 - 0.5 | 0.7 - 0.9 | 0.4 - 0.6 |

#### 2.2 调参策略

针对不同场景的调参建议：

- **低信噪比** → 提高 `noise_tolerance`
- **高函数复杂度** → 提高 `capacity`
- **高方差任务** → 降低 `variance`
- **欠拟合 (R²低)** → 降低 `bias`，提高 `capacity`
- **过拟合 (R²高但不稳定)** → 提高 `noise_tolerance`，降低 `variance`

### 3. UI交互改进

#### 3.1 Tooltip提示
- 为每个参数标签添加了 💡 图标
- 鼠标悬停显示详细的参数说明
- 使用Bootstrap Tooltip组件实现

#### 3.2 范围标签优化
- 滑块两端的标签更加具体
- 例如："0.1 (难学)" 和 "2.0 (简单)"
- 帮助用户快速理解参数含义

#### 3.3 调参建议显示
- 每个参数下方显示灰色的建议文本
- 格式: "💡 建议: ..."
- 提供具体的数值范围和应用场景

---

## 代码变更

### 修改的文件

1. **templates/index.html**
   - 第601-693行: 回归数据集特性参数说明
   - 第720-757行: 模型能力参数说明和调参建议

2. **static/js/index.js**
   - 第65-69行: 初始化Bootstrap Tooltips

### 新增HTML元素

- 每个参数标签添加 `data-bs-toggle="tooltip"` 属性
- 添加参数说明的 `<small>` 标签
- 添加模型能力参数说明的 `alert-info` 提示框

### JavaScript改进

- 在 `DOMContentLoaded` 事件中初始化所有Tooltips
- 使用Bootstrap Tooltips API实现悬停提示

---

## 用户体验提升

### Before (改进前)
- ❌ 参数含义不明确
- ❌ 不知道合理的取值范围
- ❌ 缺少调参指导
- ❌ 新手用户难以使用

### After (改进后)
- ✅ 每个参数都有清晰的说明
- ✅ 提供了不同模型类型的建议范围
- ✅ 针对不同场景提供调参策略
- ✅ 使用Tooltip避免界面过于拥挤
- ✅ 帮助新手快速上手

---

## 使用示例

### 场景1: 测试线性回归模型

**数据集配置**:
```
信噪比: 1.5 (较简单)
函数复杂度: 0.2 (接近线性)
噪声水平: 0.1 (低噪声)
异方差性: 不勾选
特征数量: 5 (简单)
特征噪声: 0.02 (很低)
```

**模型配置**:
```
Bias: 0.5 (中等)
Variance: 0.1 (低)
Capacity: 0.5 (中等)
Noise Tol.: 0.5 (一般)
```

### 场景2: 测试深度学习模型

**数据集配置**:
```
信噪比: 0.8 (较难)
函数复杂度: 0.8 (高度非线性)
噪声水平: 0.3 (中等噪声)
异方差性: 勾选
特征数量: 15 (复杂)
特征噪声: 0.08 (较高)
```

**模型配置**:
```
Bias: 0.2 (低)
Variance: 0.6 (较高)
Capacity: 0.95 (很高)
Noise Tol.: 0.5 (中等)
```

### 场景3: 模拟欠拟合现象

**数据集配置**:
```
函数复杂度: 0.7 (较高)
```

**模型配置** (故意设置能力不足):
```
Bias: 0.7 (高，导致欠拟合)
Capacity: 0.4 (低，无法拟合复杂模式)
```

**预期结果**: R² 较低，MAE/RMSE 较高

### 场景4: 模拟过拟合现象

**数据集配置**:
```
信噪比: 0.5 (低，噪声大)
特征数量: 18 (高维)
```

**模型配置** (故意设置过拟合倾向):
```
Bias: 0.1 (低)
Variance: 0.8 (高，不稳定)
Capacity: 0.95 (高)
Noise Tol.: 0.2 (低，无法去噪)
```

**预期结果**: 训练集R²高，但测试集波动大

---

## 相关文档

- [REGRESSION_BUGFIX_SUMMARY.md](./REGRESSION_BUGFIX_SUMMARY.md) - 回归任务bug修复
- [PROJECT_OVERVIEW.md](./PROJECT_OVERVIEW.md) - 项目整体架构
- [README_WEB.md](./README_WEB.md) - Web界面使用说明

---

## 后续改进建议

1. **添加参数预设方案**
   - 提供"简单"、"中等"、"困难"等预设配置
   - 一键加载典型场景的参数组合

2. **添加参数验证**
   - 检测不合理的参数组合
   - 给出警告和建议

3. **添加可视化反馈**
   - 在滑块拖动时实时显示参数对预期性能的影响
   - 使用颜色编码表示难度等级

4. **添加案例库**
   - 内置常见回归任务的参数配置
   - 如房价预测、销量预测、股票预测等

5. **添加教程模式**
   - 分步引导用户完成第一次实验
   - 解释每步操作的目的和预期结果
